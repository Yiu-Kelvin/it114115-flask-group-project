<script>
    $('.preview-text').each(function(){
        var text = $(this).text();
        if(text.length > 500){
            $(this).text(text.substring(0, 500) + '...');
        }
    }
    )
</script>

{# TODO: turn this into adiv #}
<table class="table table-hover">
    <tr>


        <td width="70px">
            <a href="{{ url_for('user', username=post.author.username) }}">
                <img src="{{ post.author.avatar(70) }}"/>
            </a>
        </td>
        <td>          

        <br/>
        <div class="container">
            <h3><a href="{{ url_for('post', id=post.id) }}">{{ post.title }}</a></h3>
        </div>
        <div class="container preview-text">
            {{ post.body }}
        </div>
        <br/>
        <div>
        {% for tag in post.tags %}
            <span class="badge badge-pill bg-light"><a href="{{ url_for('tag', id=tag.id) }}" >{{ tag.name }} </a></span>
            
        {% endfor %}

        <p class="text-right">
                {% set user_link %}
            <a href="{{ url_for('user', username=post.author.username) }}">{{ post.author.username }}</a>
        {% endset %}
        
        {{ _('%(username)s asked %(when)s',
        username=user_link, when=moment(post.created_at).fromNow()) }}
        </p>
        
        </div>


    </td>
</tr>
</table>
