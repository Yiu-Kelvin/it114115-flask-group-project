<script>
$(document).ready(function() {
    $('.preview-text').each(function(){
        var text = $(this).text();
        console.log(text); // Use console.log instead of print
        if(text.length > 500){

            $(this).text(text.substring(0, 500) + '...');
            console.log(text.substring(0, 500) + '...');
        }
    });
});
</script>

<div class="d-flex p-2 flex-row border">
  <div class="d-flex flex-column text-end" style="min-width:79px;">
    <p>votes: {{ post.total_votes() }}</p>
    <p>answers: {{ post.answers | length }}</p>
    <p>views: 0</p>
  </div>
  <div class="d-flex flex-column ms-3 flex-fill" >
    <h3> 
        <a href="/post/{{ post.id }}">{{ post.title }}</a>
    </h3>
        <p class="preview-text">{{ post.body|e }} </p>
    <div class="d-flex flex-fill overflow-visible">
         {% for tag in post.tags %}
            <span class="badge badge-pill bg-light me-2" style="max-height:23.6px;"><a href="{{ url_for('tag', id=tag.id) }}" >{{ tag.name }} </a></span>
            
        {% endfor %}
    <div class="text-end flex-fill">
                
        <img src="https://www.gravatar.com/avatar/8e3fa2a771d1aadb87850daf5f0d921d?d=identicon&s=70" alt=""  width="16" height="16">
        
            <a href="/user/{{ post.author.id }}">{{ post.author.username }}</a>
         {{ _('asked %(when)s',
 when=moment(post.created_at).fromNow()) }}
     </div> 
    </div>
  </div>
</div>
