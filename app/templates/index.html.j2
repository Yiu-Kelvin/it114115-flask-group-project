{% extends "base.html.j2" %}
{# {% import 'bootstrap/wtf.html' as wtf %} #}
{% block app_content %}
    <h1>{{ _('Hi, %(username)s!', username=current_user.username) }}</h1>

    {% if form %}

        <form action="/" method="post">
        {{ form.csrf_token }}
        <div class="form-group">
            <label>Title</label>
            {{ form.title(class_='form-control') }}
        </div>
        <div class="form-group">
            <label>Body</label>

            {{ form.body(class_='form-control')  }}
        </div>
        <div class="form-group">
            <label>Tag</label>
            {{ form.tag(class_='form-control')  }}
        </div>
        <div class="form-group ">
            {{ form.submit(class_='btn btn-primary mt-2') }}
        </div>
        </form>
            <br/>   
    {% endif %}

    {% for post in posts %}
        {% include "_post.html.j2" %}
    {% endfor %}
    
    <nav aria-label="...">
        <ul class="pagination justify-content-center">
            <li class="previous{% if not prev_url %} page-item disabled {% endif %}">
                <a class="page-link" href="{{ prev_url or '#' }}">
                    <span aria-hidden="true">&larr;</span> {{ _('Newer posts') }}
                </a>
            </li>

            {% for page in range(pagination.pages) %}
                {% set page = page + 1 %}
                {% if page == pagination.page %}
                    <li class="page-item active">
                        <a class="page-link" href="{{ url_for(request.endpoint, page=page) }}">{{ page }}</a>
                    </li>
                {% else %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for(request.endpoint, page=page) }}">{{ page }}</a>
                    </li>
                {% endif %}
                
            {% endfor %}
            <li class="next{% if not next_url %} disabled{% endif %} page-link">
                <a href="{{ next_url or '#' }}">
                    {{ _('Older posts') }} <span aria-hidden="true">&rarr;</span>
                </a>
            </li>
        </ul>
    </nav>
{% endblock %}
